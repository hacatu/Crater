<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Crater Container Library: include/crater/sla.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Crater Container Library
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_27aea823fd5451555362d8413ef076c0.html">crater</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sla.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="sla_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcr8r__sla.html">cr8r_sla</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slab allocator.  <a href="structcr8r__sla.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:affc3324e751dc7dc79a1050835c793c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sla_8h.html#affc3324e751dc7dc79a1050835c793c8">cr8r_sla_init</a> (<a class="el" href="structcr8r__sla.html">cr8r_sla</a> *self, uint64_t elem_size, uint64_t cap)</td></tr>
<tr class="memdesc:affc3324e751dc7dc79a1050835c793c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a slab allocator.  <a href="sla_8h.html#affc3324e751dc7dc79a1050835c793c8">More...</a><br /></td></tr>
<tr class="separator:affc3324e751dc7dc79a1050835c793c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98be28c3a5880fc372debd07c609f6ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sla_8h.html#a98be28c3a5880fc372debd07c609f6ca">cr8r_sla_delete</a> (<a class="el" href="structcr8r__sla.html">cr8r_sla</a> *self)</td></tr>
<tr class="memdesc:a98be28c3a5880fc372debd07c609f6ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a slab allocator.  <a href="sla_8h.html#a98be28c3a5880fc372debd07c609f6ca">More...</a><br /></td></tr>
<tr class="separator:a98be28c3a5880fc372debd07c609f6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8769bda58fe872292aa682e86cc357ca"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sla_8h.html#a8769bda58fe872292aa682e86cc357ca">cr8r_sla_alloc</a> (<a class="el" href="structcr8r__sla.html">cr8r_sla</a> *self)</td></tr>
<tr class="memdesc:a8769bda58fe872292aa682e86cc357ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate an object.  <a href="sla_8h.html#a8769bda58fe872292aa682e86cc357ca">More...</a><br /></td></tr>
<tr class="separator:a8769bda58fe872292aa682e86cc357ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91b5b716ec069a4ee5947fd2ade370ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sla_8h.html#a91b5b716ec069a4ee5947fd2ade370ca">cr8r_sla_free</a> (<a class="el" href="structcr8r__sla.html">cr8r_sla</a> *self, void *p)</td></tr>
<tr class="memdesc:a91b5b716ec069a4ee5947fd2ade370ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees and object which was previously allocated by <a class="el" href="sla_8h.html#a8769bda58fe872292aa682e86cc357ca">cr8r_sla_alloc</a>.  <a href="sla_8h.html#a91b5b716ec069a4ee5947fd2ade370ca">More...</a><br /></td></tr>
<tr class="separator:a91b5b716ec069a4ee5947fd2ade370ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>hacatu </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.3.0 </dd></dl>
<h1><a class="anchor" id="LICENSE"></a>
LICENSE</h1>
<p>This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. </p>
<h1><a class="anchor" id="DESCRIPTION"></a>
DESCRIPTION</h1>
<p>Simple slab allocator. Allows for efficient allocation of objects of a fixed size </p>

<p class="definition">Definition in file <a class="el" href="sla_8h_source.html">sla.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="affc3324e751dc7dc79a1050835c793c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc3324e751dc7dc79a1050835c793c8">&#9670;&nbsp;</a></span>cr8r_sla_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cr8r_sla_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcr8r__sla.html">cr8r_sla</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>elem_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a slab allocator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">self</td><td>slab allocator to initialize </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elem_size</td><td>size of a single element in bytes. allocations returned will be this big. must be at least sizeof(void*) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cap</td><td>the number of elements to reserve space for initially, which is all reserved in a single "slab". must be at least 1 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure (allocation failure) </dd></dl>

<p class="definition">Definition at line <a class="el" href="sla_8c_source.html#l00005">5</a> of file <a class="el" href="sla_8c_source.html">sla.c</a>.</p>

</div>
</div>
<a id="a98be28c3a5880fc372debd07c609f6ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98be28c3a5880fc372debd07c609f6ca">&#9670;&nbsp;</a></span>cr8r_sla_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cr8r_sla_delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcr8r__sla.html">cr8r_sla</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a slab allocator. </p>
<p>Frees all slabs and zeros out capacity/len. The allocator should not be used again after this, unless it is reinitialized. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">self</td><td>slab allocator to delete </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sla_8c_source.html#l00027">27</a> of file <a class="el" href="sla_8c_source.html">sla.c</a>.</p>

</div>
</div>
<a id="a8769bda58fe872292aa682e86cc357ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8769bda58fe872292aa682e86cc357ca">&#9670;&nbsp;</a></span>cr8r_sla_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* cr8r_sla_alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcr8r__sla.html">cr8r_sla</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate an object. </p>
<p>If successful, the returned pointer will point to uninitialized memory with the element size of the slab allocator. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">self</td><td>slab allocator to allocate from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to useable uninitialized memory of the slab allocator's element size, or NULL if no unallocated elements are available and allocation of more backing storage fails. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sla_8c_source.html#l00035">35</a> of file <a class="el" href="sla_8c_source.html">sla.c</a>.</p>

</div>
</div>
<a id="a91b5b716ec069a4ee5947fd2ade370ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91b5b716ec069a4ee5947fd2ade370ca">&#9670;&nbsp;</a></span>cr8r_sla_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cr8r_sla_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcr8r__sla.html">cr8r_sla</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees and object which was previously allocated by <a class="el" href="sla_8h.html#a8769bda58fe872292aa682e86cc357ca">cr8r_sla_alloc</a>. </p>
<p>The slab allocator does not check if this is indeed an allocated block, because doing so would make deallocation an O(log(n)) operation and require a larger minimum element size be enforced. It is technically possible to "abuse" this function to "free" pointers to elements from some other backing store, and then the allocator will hand these out together with elements actually from the underlying slabs. However, this should typically not be done because it ties the slab allocator to an external backing store that is not managed by it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">self</td><td>slab allocator to work with </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>pointer to free </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="sla_8c_source.html#l00058">58</a> of file <a class="el" href="sla_8c_source.html">sla.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
